---
title: "hw02-gapminder exploration"
author: "Frederike Basedow"
date: "22 September 2018"
output: github_document
---

### Load the data and packages
```{r, message=FALSE}
library(gapminder)
library(tidyverse)
library(knitr)
```

### Smell test the data

Explore the gapminder object:

1. Is it a data.frame, a matrix, a vector, a list?

```{r}
# Check for the structure and type of gapminder
str(gapminder)
typeof(gapminder)
```

Gapminder is a list that contains 3 different classes: table-data frame, table and data frame. 

2. What is its class?

```{r}
class(gapminder)
```

3. How many variables/columns?

```{r}
n_var <- ncol(gapminder)
n_var
```

Gapminder has `r n_var` variables.

4. How many rows/observations?

```{r}
n_obs <- nrow(gapminder)
n_obs
```

Gapminder has `r n_obs` observations.

5. Can you get these facts about “extent” or “size” in more than one way? Can you imagine different functions being useful in different contexts?

You can get the number of variables and observations with the functions `ncol()` and `nrow()`, respectively as I did above, but you could also use the function `str()`, that includes the number of variable and observations in its output. `str` is useful if you just want to get an overview of what your data set looks like, `nrow` and `ncol` are useful if you want to use these number for further calculations.

6. What data type is each variable?

```{r}
sapply(gapminder, class)
```

### Explore individual variables

Pick at least one categorical variable and at least one quantitative variable to explore.

I will explore `country` as a categorical variable and `lifeExp` as a quanititative variable.

1. What are possible values (or range, whichever is appropriate) of each variable?

```{r}
range(gapminder$lifeExp) # get the range of lifeExp
nlevels(gapminder$country) # get the number of countries
levels(gapminder$country) # get a list of each country in the data set
levels(as.factor(gapminder$year)) # get a list of all years included in data set
```

2. What values are typical? What’s the spread? What’s the distribution? Etc., tailored to the variable at hand.

lifeExp:

```{r}
# get statistics of lifeExp variable, make them into a data frame for presenting in nice table with kable()
summary(gapminder$lifeExp) %>% as.matrix() %>% as.data.frame() %>% rownames_to_column() %>% rename(Stat=rowname, Value=V1) %>% kable()

# make density plot for lifeExp variable
gapminder %>% 
  ggplot(aes(lifeExp)) + 
  geom_density()

# make plot that shows lifeExp over the years per country with clour coding per continent
gapminder %>% 
  ggplot(aes(year,lifeExp)) +
  geom_line(aes(group=country, colour=continent))
```

Feel free to use summary stats, tables, figures. We’re NOT expecting high production value (yet).


### Explore various plot types

Make a few plots, probably of the same variable you chose to characterize numerically. You can use the plot types we went over in class (cm006) to get an idea of what you’d like to make. Try to explore more than one plot type. Just as an example of what I mean:

1. A scatterplot of two quantitative variables.

```{r}
# make a scatterplot of lifeExp vs. gdpPercap
gapminder %>% 
  ggplot(aes(gdpPercap, lifeExp)) +
  geom_jitter() 
```

2. A plot of one quantitative variable. Maybe a histogram or densityplot or frequency polygon.

```{r}
# frequency pplygon for population
gapminder %>% 
  ggplot(aes(pop)) +
  geom_freqpoly()
```

3. A plot of one quantitative variable and one categorical. Maybe boxplots for several continents or countries.

```{r}
gapminder %>% 
  ggplot(aes(continent, lifeExp)) +
  geom_violin() +
  geom_jitter(alpha=0.25) +
  labs(x="Continent", y="Life Expectancy")
```


You don’t have to use all the data in every plot! It’s fine to filter down to one country or small handful of countries.

```{r}
gapminder %>% filter(continent == "Asia") %>% 
  ggplot(aes(country, lifeExp)) +
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```


### Use filter(), select() and %>%

1. Use filter() to create data subsets that you want to plot. Practice piping together filter() and select(). Possibly even piping into ggplot().

```{r}
# i don't understand the use of `select()` when you're plotting data since you're selecting data in your plot settings anyways
gapminder %>% 
  select(continent, country, lifeExp, year) %>% 
  filter(year=="1952") %>% 
  ggplot(aes(continent, lifeExp)) +
  geom_violin() +
  geom_jitter()
```

### But I want to do more!

Evaluate this code and describe the result. Presumably the analyst’s intent was to get the data for Rwanda and Afghanistan. Did they succeed? Why or why not? If not, what is the correct way to do this?

```{r}
filter(gapminder, country == c("Rwanda", "Afghanistan"))
```

They did not succeed - the output doesn't include all of the data of Afghanistan and Rwanda, only one of the two for each year. 

The correct way is:
```{r}
gapminder %>% filter(country %in% c("Afghanistan", "Rwanda"))

# or

gapminder %>% filter(country == "Afghanistan" | country =="Rwanda")
```


